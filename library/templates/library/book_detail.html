{% extends 'library/base.html' %}

{% block title %}{{ book.title }} – Book Port{% endblock %}

{% block content %}
    <article>
        <h2>{{ book.title }}</h2>
        <p><em>by {{ book.author }}</em></p>

        {% if book.cover_image %}
            <img src="{{ book.cover_image }}"
                 alt="{{ book.title }} cover"
                 style="max-width: 200px; margin-bottom: 1rem;">
        {% endif %}

        <ul>
            {% if book.published_year %}
                <li><strong>Published:</strong> {{ book.published_year }}</li>
            {% endif %}

            {% if book.price %}
                <li><strong>Price:</strong> £{{ book.price }}</li>
            {% endif %}

            <li>
                <strong>Status:</strong>
                {% if book.available %}
                    Available for sale or exchange
                {% else %}
                    Currently unavailable
                {% endif %}
            </li>
        </ul>

        {% if book.description %}
            <h3>Description</h3>
            <p>{{ book.description }}</p>
        {% endif %}

        <p>
            <a href="{% url 'book_list' %}">&larr; Back to all books</a>
        </p>
    </article>

    <hr>

    <section style="margin-top: 2rem;">
        <h3>Enquire about this book</h3>

        {% if success %}
            <p style="color: green; font-weight: bold;">
                Thank you for your enquiry. We’ll get back to you shortly.
            </p>
        {% endif %}

        <form method="post">
            {% csrf_token %}

            {{ form.non_field_errors }}

            <div style="margin-bottom: 0.8rem;">
                {{ form.name.label_tag }}<br>
                {{ form.name }}
                {% if form.name.errors %}
                    <div style="color: red;">{{ form.name.errors }}</div>
                {% endif %}
            </div>

            <div style="margin-bottom: 0.8rem;">
                {{ form.email.label_tag }}<br>
                {{ form.email }}
                {% if form.email.errors %}
                    <div style="color: red;">{{ form.email.errors }}</div>
                {% endif %}
            </div>

            <div style="margin-bottom: 0.8rem;">
                {{ form.inquiry_type.label_tag }}<br>
                {{ form.inquiry_type }}
                {% if form.inquiry_type.errors %}
                    <div style="color: red;">{{ form.inquiry_type.errors }}</div>
                {% endif %}
            </div>

            <div style="margin-bottom: 0.8rem;">
                {{ form.message.label_tag }}<br>
                {{ form.message }}
                {% if form.message.errors %}
                    <div style="color: red;">{{ form.message.errors }}</div>
                {% endif %}
            </div>

            <button type="submit" style="padding: 0.5rem 1rem;">
                Send enquiry
            </button>
        </form>
    </section>
{% endblock %}
